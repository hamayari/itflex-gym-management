{# Custom Form Theme for Professional Forms #}

{% use "bootstrap_5_layout.html.twig" %}

{# Form Row #}
{% block form_row -%}
    <div class="mb-3{% if errors|length > 0 %} has-error{% endif %}">
        {{- form_label(form) -}}
        {{- form_widget(form) -}}
        {{- form_errors(form) -}}
        {{- form_help(form) -}}
    </div>
{%- endblock form_row %}

{# Form Label #}
{% block form_label -%}
    {% if label is not same as(false) -%}
        {% if required -%}
            {% set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' required')|trim}) %}
        {%- endif -%}
        {% if label is empty -%}
            {%- if label_format is not empty -%}
                {% set label = label_format|replace({
                    '%name%': name,
                    '%id%': id,
                }) %}
            {%- else -%}
                {% set label = name|humanize %}
            {%- endif -%}
        {%- endif -%}
        <label{% if label_attr %}{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}{% endif %} for="{{ id }}" class="form-label fw-bold">
            {{- translation_domain is same as(false) ? label : label|trans(label_translation_parameters, translation_domain) -}}
            {% if required %}
                <span class="text-danger">*</span>
            {% endif %}
        </label>
    {%- endif -%}
{%- endblock form_label %}

{# Form Widget #}
{% block form_widget_simple -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim}) -%}
    {{- parent() -}}
{%- endblock form_widget_simple %}

{# Textarea Widget #}
{% block textarea_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim, rows: attr.rows|default(4)}) -%}
    {{- parent() -}}
{%- endblock textarea_widget %}

{# Choice Widget #}
{% block choice_widget_collapsed -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-select')|trim}) -%}
    {{- parent() -}}
{%- endblock choice_widget_collapsed %}

{# Checkbox Widget #}
{% block checkbox_row -%}
    <div class="mb-3 form-check">
        {{- form_widget(form) -}}
        {{- form_label(form) -}}
        {{- form_errors(form) -}}
        {{- form_help(form) -}}
    </div>
{%- endblock checkbox_row %}

{% block checkbox_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-check-input')|trim}) -%}
    {{- parent() -}}
{%- endblock checkbox_widget %}

{% block checkbox_label -%}
    {% if label is not same as(false) -%}
        {% set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' form-check-label')|trim}) %}
        {{- parent() -}}
    {%- endif -%}
{%- endblock checkbox_label %}

{# Radio Widget #}
{% block radio_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-check-input')|trim}) -%}
    {{- parent() -}}
{%- endblock radio_widget %}

{# File Widget #}
{% block file_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim}) -%}
    {{- parent() -}}
{%- endblock file_widget %}

{# Form Errors #}
{% block form_errors -%}
    {%- if errors|length > 0 -%}
        <div class="invalid-feedback d-block">
            {%- for error in errors -%}
                <div class="d-flex align-items-center mb-1">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <span>{{ error.message }}</span>
                </div>
            {%- endfor -%}
        </div>
    {%- endif -%}
{%- endblock form_errors %}

{# Form Help #}
{% block form_help -%}
    {%- if help is not empty -%}
        <small class="form-text text-muted">
            <i class="fas fa-info-circle me-1"></i>
            {{- help|trans(help_translation_parameters, translation_domain) -}}
        </small>
    {%- endif -%}
{%- endblock form_help %}

{# Date Widget #}
{% block date_widget -%}
    {%- if widget == 'single_text' -%}
        {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim, type: 'date'}) -%}
    {%- endif -%}
    {{- parent() -}}
{%- endblock date_widget %}

{# Time Widget #}
{% block time_widget -%}
    {%- if widget == 'single_text' -%}
        {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim, type: 'time'}) -%}
    {%- endif -%}
    {{- parent() -}}
{%- endblock time_widget %}

{# DateTime Widget #}
{% block datetime_widget -%}
    {%- if widget == 'single_text' -%}
        {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim, type: 'datetime-local'}) -%}
    {%- endif -%}
    {{- parent() -}}
{%- endblock datetime_widget %}

{# Number Widget #}
{% block number_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim}) -%}
    {{- parent() -}}
{%- endblock number_widget %}

{# Email Widget #}
{% block email_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim}) -%}
    {{- parent() -}}
{%- endblock email_widget %}

{# Password Widget #}
{% block password_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim}) -%}
    {{- parent() -}}
{%- endblock password_widget %}
